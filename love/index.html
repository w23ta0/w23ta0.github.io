<!DOCTYPE html>
<html>

<head>
    <title>Our Love Story | w23ta0's blog</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" id="theme-css" href="css/theme.css" type="text/css" media="all">
    <link rel="stylesheet" id="custom-css" href="css/custom.css" type="text/css" media="all">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript" src="js/functions_dev.js"></script>
    <script type="text/javascript" src="js/garden_dev.js"></script>
    <audio id="bgMusic" loop>
        <source src="https://w23ta0-blog.oss-cn-hongkong.aliyuncs.com/Jason%20Derulo%20-%20Marry%20Me%20%5BUMD%5D.mp3" type="audio/mp3">
    </audio>
    <button id="musicToggle" class="music-toggle">
        <i class="glyphicon glyphicon-music"></i>
    </button>
    <!-- æ·»åŠ canvasèƒŒæ™¯ -->
    <canvas id="canvas"></canvas>
    <style>
        @keyframes fadeOut {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-20px) scale(0.8);
            }
        }

        .love-text {
            position: fixed;
            font-size: 1.2em;
            user-select: none;
            z-index: 9999;
            pointer-events: none;
        }
    </style>
</head>

<body class="home page page-id-19 page-template page-template-homepage page-template-homepage-php group-blog">
    <div id="page" class="hfeed site">
        <div id="content" class="site-content">
            <div style="position:relative;z-index:0;background:none repeat scroll 0 0 transparent" class="subhead">
                <div class="subinner">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-12 wednames">Our Love Story <span><a href="http://w23ta0.github.io">w23ta0's blog</a></span></div>
                            <div class="col-md-6">
                                <div class="bridecol">
                                    <div class="bridepic"><img src="images/bridecup-180x180.png" alt="bride"></div>
                                    <div class="brideinfo">
                                        <h3>Geng Ling</h3>
                                        <p>ç›¸é‡ æ˜¯ä»¶ç¾å¥½çš„äº‹ğŸŒ¸</p>
                                    </div>
                                    <div class="cplus glyphicon glyphicon-heart"></div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="groomcol">
                                    <div class="groompic"><img src="images/groomcup-180x180.png" alt="groom"></div>
                                    <div class="groominfo">
                                        <h3>Wu Tao</h3>
                                        <p>ä¸€ç”Ÿå¾ˆçŸ­ï¼Œåªå¤Ÿçˆ±ä½ ä¸€äºº</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <h2 class="timehead">We have been together</h2>
                                <div id="ctimer">
                                    <div id="elapseClock"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>
<script type="text/javascript">
var msg, offsetX = $("#loveHeart").width() / 2,
    offsetY = $("#loveHeart").height() / 2 - 55,
    displayMode = 1,
    together = new Date(2013, 0, 12), // åˆå§‹åŒ–èµ·å§‹æ—¥æœŸ
    updateTime = function() {
        var now = new Date(); // è·å–å½“å‰æ—¶é—´

        // è®¡ç®—å¹´ä»½å·®ï¼ˆæ³¨æ„è¦è€ƒè™‘æœˆä»½å’Œå¤©æ•°ï¼‰
        var years = now.getFullYear() - together.getFullYear();
        if (now.getMonth() < together.getMonth() ||
            (now.getMonth() === together.getMonth() && now.getDate() < together.getDate())) {
            years--; // å¦‚æœå½“å‰æ—¥æœŸæœªåˆ°è¾¾èµ·å§‹æ—¥æœŸçš„å‘¨å¹´ï¼Œåˆ™å¹´ä»½å·®å‡1
        }

        // è®¡ç®—æœˆä»½å·®
        var months = now.getMonth() - together.getMonth();
        if (now.getDate() < together.getDate()) { // å¦‚æœå½“å‰æ—¥æœŸè¿˜æ²¡åˆ°è¾¾ç›®æ ‡æ—¥æœŸ
            months--;
        }

        if (months < 0) {
            months += 12; // å¦‚æœæœˆä»½å·®å°äº0ï¼Œè¡¨ç¤ºè·¨å¹´ï¼Œéœ€è¦åŠ 12
        }

        // è®¡ç®—å¤©æ•°å·®
        var days = now.getDate() - together.getDate();
        if (days < 0) {
            var prevMonth = new Date(now.getFullYear(), now.getMonth(), 0);
            days += prevMonth.getDate(); // è·å–ä¸Šä¸€ä¸ªæœˆçš„å¤©æ•°
        }

        // è®¡ç®—å°æ—¶ã€åˆ†é’Ÿã€ç§’æ•°å·®
        var hours = now.getHours() - together.getHours();
        var minutes = now.getMinutes() - together.getMinutes();
        var seconds = now.getSeconds() - together.getSeconds();

        // å¤„ç†æ—¶é—´å·®ï¼Œé¿å…å‡ºç°è´Ÿå€¼
        if (seconds < 0) {
            minutes--;
            seconds += 60;
        }
        if (minutes < 0) {
            hours--;
            minutes += 60;
        }
        if (hours < 0) {
            days--;
            hours += 24;
        }

        // æ ¼å¼åŒ–è¾“å‡º
        document.getElementById('elapseClock').innerHTML = `
            <span class="digit">
                <h3>${years}</h3> years
            </span>
            <span class="digit">
                <h3>${months}</h3> months
            </span>
            <span class="digit">
                <h3>${days}</h3> days
            </span>
            <span class="digit">
                <h3>${hours.toString().padStart(2, '0')}</h3> hours
            </span>
            <span class="digit">
                <h3>${minutes.toString().padStart(2, '0')}</h3> minutes
            </span>
            <span class="digit">
                <h3>${seconds.toString().padStart(2, '0')}</h3> seconds
            </span>
        `;
    };

    // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function() {
        const music = document.getElementById('bgMusic');
        const musicToggle = document.getElementById('musicToggle');
        
        // ç›‘å¬å„ç§ç”¨æˆ·äº¤äº’äº‹ä»¶æ¥å¯åŠ¨éŸ³ä¹
        function initAutoPlay() {
            music.play().then(() => {
                musicToggle.classList.add('playing');
                // æ’­æ”¾æˆåŠŸåç§»é™¤æ‰€æœ‰äº‹ä»¶ç›‘å¬
                removeEvents();
            }).catch(() => {
                // å¦‚æœè‡ªåŠ¨æ’­æ”¾å¤±è´¥ï¼Œä¸æ˜¾ç¤ºæ—‹è½¬åŠ¨ç”»
                musicToggle.classList.remove('playing');
            });
        }

        // ç§»é™¤äº‹ä»¶ç›‘å¬å™¨
        function removeEvents() {
            ['click', 'touchstart', 'scroll', 'mousemove'].forEach(event => {
                document.removeEventListener(event, initAutoPlay);
            });
        }

        // æ·»åŠ äº‹ä»¶ç›‘å¬
        ['click', 'touchstart', 'scroll', 'mousemove'].forEach(event => {
            document.addEventListener(event, initAutoPlay, { once: true });
        });
        
        // éŸ³ä¹æ§åˆ¶æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        musicToggle.addEventListener('click', function(e) {
            e.stopPropagation(); // é˜»æ­¢äº‹ä»¶å†’æ³¡
            if (music.paused) {
                music.play().then(() => {
                    musicToggle.classList.add('playing');
                });
            } else {
                music.pause();
                musicToggle.classList.remove('playing');
            }
        });

        // å°è¯•è‡ªåŠ¨æ’­æ”¾
        initAutoPlay();

        // èƒŒæ™¯åŠ¨ç”»
        var canvas = document.getElementById('canvas'),
            ctx = canvas.getContext('2d'),
            width = window.innerWidth,
            height = window.innerHeight,
            particles = [];

        canvas.width = width;
        canvas.height = height;

        function Particle(x, y) {
            this.x = x;
            this.y = y;
            this.size = Math.random() * 3 + 1;
            this.speedX = Math.random() * 2 - 1;
            this.speedY = Math.random() * 2 - 1;
            this.opacity = Math.random() * 0.5 + 0.2;
        }

        Particle.prototype.move = function() {
            this.x += this.speedX;
            this.y += this.speedY;
            
            if (this.x > width) this.x = 0;
            if (this.x < 0) this.x = width;
            if (this.y > height) this.y = 0;
            if (this.y < 0) this.y = height;
        }

        Particle.prototype.draw = function() {
            ctx.fillStyle = `rgba(255, 255, 255, ${this.opacity})`;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.fill();
        }

        // åˆ›å»ºç²’å­
        function createParticles() {
            for (var i = 0; i < 100; i++) {
                particles.push(new Particle(
                    Math.random() * width,
                    Math.random() * height
                ));
            }
        }

        // åŠ¨ç”»å¾ªç¯
        function animate() {
            ctx.clearRect(0, 0, width, height);
            
            particles.forEach(function(particle) {
                particle.move();
                particle.draw();
            });
            
            requestAnimationFrame(animate);
        }

        // çª—å£å¤§å°æ”¹å˜æ—¶é‡ç½®ç”»å¸ƒ
        window.addEventListener('resize', function() {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;
        });

        // åˆå§‹åŒ–èƒŒæ™¯åŠ¨ç”»
        createParticles();
        animate();
    });

    // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œä¸€æ¬¡æ—¶é—´å·®è®¡ç®—
    updateTime();

    // æ¯500æ¯«ç§’æ›´æ–°ä¸€æ¬¡
    setInterval(updateTime, 500);

    // å®šä¹‰æš§æ˜§æ–‡å­—æ•°ç»„
    const loveTexts = [
        "å¿ƒåŠ¨", 
        "æƒ³ä½ ",
        "å¥½å–œæ¬¢",
        "æ¸©æŸ”",
        "ç”œç”œçš„",
        "æš–æš–çš„",
        "å¿ƒè·³",
        "æ˜Ÿæ˜Ÿ",
        "æœˆå…‰",
        "æ™šé£",
        "å¾®ç¬‘",
        "é‡è§ä½ ",
        "å–œæ¬¢ä½ ",
        "åœ¨ä¸€èµ·",
        "å·çœ‹ä½ ",
        "å°ç¡®å¹¸",
        "å¿ƒåŠ¨äº†",
        "æœ‰æ„Ÿè§‰",
        "é»˜å¥‘",
        "ç¼˜åˆ†",
        "ä¸€çœ¼ä¸‡å¹´",
        "æ‚¸åŠ¨",
        "å¿ƒå¿µ",
        "æƒ…æ„«",
        "æš§æ˜§",
        "å¿ƒäº‹",
        "æƒ…è¯",
        "æµªæ¼«",
        "å¿ƒåŠ¨ç¬é—´",
        "å°å¹¸ç¦",
        "å¿ƒèŠ±æ€’æ”¾",
        "å¿ƒåŠ¨ä¿¡å·",
        "çˆ±æ„",
        "æ¸©åº¦",
        "å¿ƒåŠ¨åŠ é€Ÿ",
        "å¿ƒåŠ¨é¢„è­¦",
        "å¿ƒåŠ¨è®¯å·",
        "å¿ƒåŠ¨æ—¶åˆ»",
        "å¿ƒåŠ¨æ„Ÿåº”"
    ];

    // ç”Ÿæˆéšæœºé¢œè‰²
    function getRandomColor() {
        const colors = [
            '#FF69B4', // ç²‰çº¢
            '#FF1493', // æ·±ç²‰çº¢
            '#FF69B4', // çƒ­ç²‰çº¢
            '#FFC0CB', // æµ…ç²‰çº¢
            '#FFB6C1', // äº®ç²‰çº¢
            '#FF0000', // çº¢è‰²
            '#FF4500', // æ©™çº¢è‰²
            '#FFA500', // æ©™è‰²
            '#FFD700', // é‡‘è‰²
            '#FF8C00'  // æ·±æ©™è‰²
        ];
        return colors[Math.floor(Math.random() * colors.length)];
    }

    // ç‚¹å‡»æ•ˆæœ
    document.addEventListener('click', function(e) {
        // åˆ›å»ºæ–‡å­—å…ƒç´ 
        const text = document.createElement('div');
        text.className = 'love-text';
        text.textContent = loveTexts[Math.floor(Math.random() * loveTexts.length)];
        text.style.left = e.pageX + 'px';
        text.style.top = e.pageY + 'px';
        text.style.color = getRandomColor();
        text.style.position = 'fixed';
        text.style.pointerEvents = 'none';
        
        // æ·»åŠ å†…è”æ ·å¼ç¡®ä¿åŠ¨ç”»æ•ˆæœ
        text.style.animation = 'fadeOut 1.5s forwards';
        text.style.opacity = '1';
        text.style.transition = 'all 1.5s';
        
        document.body.appendChild(text);
        
        // ç¡®ä¿å…ƒç´ è¢«ç§»é™¤
        setTimeout(() => {
            if (text && text.parentNode) {
                text.parentNode.removeChild(text);
            }
        }, 1500);
    });
</script>
